<!-- dashboard-drh.component.html -->
<div class="dashboard-container" style="padding-top: 10em;">
    <app-welcome-card></app-welcome-card>
    <app-kpi-cards [kpis]="kpis" [errorMessage]="errorMessage"></app-kpi-cards>

    <!-- Chart Navigation -->
    <div class="chart-navigation">
        <button 
            [class.active]="activeChart === 'monthly'" 
            (click)="showChart('monthly')"
            class="chart-btn">
            ðŸ“… Par Mois
        </button>
        <button 
            [class.active]="activeChart === 'category'" 
            (click)="showChart('category')"
            class="chart-btn">
            ðŸ“Š Par CatÃ©gorie
        </button>
        <button 
            [class.active]="activeChart === 'type'" 
            (click)="showChart('type')"
            class="chart-btn">
            ðŸŽ¯ Par Type
        </button>
        <button 
            [class.active]="activeChart === 'monthYear'" 
            (click)="showChart('monthYear')"
            class="chart-btn">
            ðŸ“ˆ Mois/AnnÃ©e
        </button>
    </div>

    <!-- Main Chart Section -->
    <div class="chart-section">
        <app-generic-chart
          [chartData]="getCurrentChartData()"
          [chartCategories]="getCurrentChartCategories()"
          [chartTitle]="getCurrentChartTitle()"
          [chartType]="getCurrentChartType()"
          [seriesName]="getCurrentSeriesName()"
          [color]="getCurrentColor()"
          [showLegend]="activeChart === 'type'"
        ></app-generic-chart>
    </div>

    <!-- Mini Charts Grid -->
    <div class="mini-charts-grid">
        <div class="mini-chart">
            <h4>ðŸ“… Demandes Mois</h4>
            <app-generic-chart
                [chartData]="monthlyChartData"
                [chartCategories]="monthlyChartCategories"
                chartTitle=""
                chartType="bar"
                seriesName="Mois"
                [color]="'#4a6cf7'"
                [chartHeight]="200"
                [showToolbar]="false"
                [showLegend]="false"
            ></app-generic-chart>
        </div>

        <div class="mini-chart">
            <h4>ðŸ“Š Par CatÃ©gorie</h4>
            <app-generic-chart
                [chartData]="categoryMonthlyChartData"
                [chartCategories]="categoryMonthlyChartCategories"
                chartTitle=""
                chartType="area"
                seriesName="CatÃ©gorie"
                [color]="'#10b981'"
                [chartHeight]="200"
                [showToolbar]="false"
                [showLegend]="false"
            ></app-generic-chart>
        </div>

        <div class="mini-chart">
            <h4>ðŸŽ¯ Par Type</h4>
            <app-generic-chart
                [chartData]="typeChartData"
                [chartCategories]="typeChartCategories"
                chartTitle=""
                chartType="pie"
                seriesName="Type"
                [color]="'#f59e0b'"
                [chartHeight]="200"
                [showToolbar]="false"
                [showLegend]="false"
            ></app-generic-chart>
        </div>
    </div>
</div>